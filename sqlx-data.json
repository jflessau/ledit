{
  "db": "PostgreSQL",
  "06f4a1c11f5768e8fdf22b08a9e05de47ea5b3e47666fd05422e6e1cf4bad557": {
    "query": "update tasks set done_by = $1 where id = $2",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      },
      "nullable": []
    }
  },
  "0dd71cf7aea043c81c442f1e7284a3172f44564d037429c389c662efb00a8200": {
    "query": "select * from chat_members where telegram_user_id = $1 and chat_id=$2",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "telegram_user_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "chat_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 3,
          "name": "username",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "task_weight",
          "type_info": "Int8"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "1977caf4034f28690081084385bf2125270237679e334b23a957108dfb137db4": {
    "query": "select * from tasks where chat_id = $1 order by description asc",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "chat_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "description",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "interval_days",
          "type_info": "Int8"
        },
        {
          "ordinal": 4,
          "name": "assigned_user",
          "type_info": "Uuid"
        },
        {
          "ordinal": 5,
          "name": "scheduled_for",
          "type_info": "Date"
        },
        {
          "ordinal": 6,
          "name": "done_by",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        true,
        false,
        false,
        true
      ]
    }
  },
  "2cb921b79f18fc1bf4df1712ce7aacf3ee1df9ed3f99cdffd92188d0d2bfb4db": {
    "query": "\n            insert into tasks (\n                id,\n                chat_id,\n                description,\n                \n                interval_days,\n                assigned_user\n\n            )\n            values ( $1, $2, $3, $4, $5 )\n            RETURNING *\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "chat_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "description",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "interval_days",
          "type_info": "Int8"
        },
        {
          "ordinal": 4,
          "name": "assigned_user",
          "type_info": "Uuid"
        },
        {
          "ordinal": 5,
          "name": "scheduled_for",
          "type_info": "Date"
        },
        {
          "ordinal": 6,
          "name": "done_by",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Int8",
          "Text",
          "Int8",
          "Uuid"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        true,
        false,
        false,
        true
      ]
    }
  },
  "509c9865283e671ef3249440da572d9da42779b76c05f78c3d19ae4ea774bfd7": {
    "query": "\n            select \n                t.id,\n                t.chat_id,\n                t.description,\n                t.interval_days,\n                t.assigned_user,\n                t.scheduled_for,\n                t.done_by,\n\n                c.username\n            from tasks as t\n            join chat_members as c on c.id = t.assigned_user\n            where \n                t.chat_id = $1\n                and t.scheduled_for <= $2\n                and c.chat_id = $1\n            order by t.done_by desc, t.description asc\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "chat_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "description",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "interval_days",
          "type_info": "Int8"
        },
        {
          "ordinal": 4,
          "name": "assigned_user",
          "type_info": "Uuid"
        },
        {
          "ordinal": 5,
          "name": "scheduled_for",
          "type_info": "Date"
        },
        {
          "ordinal": 6,
          "name": "done_by",
          "type_info": "Uuid"
        },
        {
          "ordinal": 7,
          "name": "username",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Date"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        true,
        false,
        false,
        true,
        false
      ]
    }
  },
  "5430c371b8521d1c6b98bd2f38656645ca299889ccd4760ef8664ae5c66e8505": {
    "query": "\n                update tasks\n                set\n                    done_by = null,\n                    scheduled_for = now(),\n                    assigned_user = $2\n                where \n                    id = $1\n            ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      },
      "nullable": []
    }
  },
  "6b722ea4243e7294f5334562c12780d1a0ca88e79b158ce2dbe4d4f1329172da": {
    "query": "select id from chat_members where chat_id = $1",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "70af54bf8878d5860379f5729e55db3355a802118f594d170baea7f342f0b739": {
    "query": "\n            delete from \n                tasks \n            where \n                done_by is not null \n                and interval_days is null \n                and scheduled_for < now() - interval '1 day'\n        ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": []
      },
      "nullable": []
    }
  },
  "90dc9bed784b8d4e028b8b2252819ce23779067c6f8fee2f8c8cb8cc886ba0a9": {
    "query": "\n            select *\n            from tasks\n            where \n                interval_days is not null\n                and done_by is not null\n                and scheduled_for < now() - interval '1 days' * interval_days\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "chat_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "description",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "interval_days",
          "type_info": "Int8"
        },
        {
          "ordinal": 4,
          "name": "assigned_user",
          "type_info": "Uuid"
        },
        {
          "ordinal": 5,
          "name": "scheduled_for",
          "type_info": "Date"
        },
        {
          "ordinal": 6,
          "name": "done_by",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": []
      },
      "nullable": [
        false,
        false,
        false,
        true,
        false,
        false,
        true
      ]
    }
  },
  "958f7b3ab1edc82f348341e4f10a3a9ffe4f245cb18367a4c5ce8545b0524b61": {
    "query": "select * from tasks where chat_id = $1 order by description asc offset $2",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        },
        {
          "ordinal": 1,
          "name": "chat_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "description",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "interval_days",
          "type_info": "Int8"
        },
        {
          "ordinal": 4,
          "name": "assigned_user",
          "type_info": "Uuid"
        },
        {
          "ordinal": 5,
          "name": "scheduled_for",
          "type_info": "Date"
        },
        {
          "ordinal": 6,
          "name": "done_by",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        true,
        false,
        false,
        true
      ]
    }
  },
  "a726cd96536ba35f61c351a71cf08e3639616b98b35740fbbb18f39180e00a15": {
    "query": "\n                    insert into chat_members (\n                        id,\n                        telegram_user_id,\n                        chat_id,\n                        username\n                    )\n                    values ( $1, $2, $3, $4 )\n                ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Int8",
          "Int8",
          "Text"
        ]
      },
      "nullable": []
    }
  },
  "a86b6819b16982f269af675d5d573ebf5aec81c227beddd364d85f1ecbdd1eab": {
    "query": "select id from chat_members where telegram_user_id = $1 and chat_id = $2",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Uuid"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "c54895dc86771b8c8c6d6f2ae00c62a7173654c95d6596b760ae11ab95fdfcff": {
    "query": "\n                delete from tasks where id = $1\n            ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      },
      "nullable": []
    }
  }
}